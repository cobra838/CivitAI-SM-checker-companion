const translations = {
  en: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "Checks downloaded models from Stability Matrix using .cm-info.json files",
    title: "Civitai Model Checker",
    selectFolder: "Select Models Folder",
    clearCache: "Clear Cache",
    subtitle: "Upload Models folder from Stability Matrix",
    dropZoneTitle: "Select Models Folder",
    dropZoneHint: "Click to select",
    cacheEmpty: "Cache is empty. Select Models folder",
    cacheCleared: "Cache cleared",
    processingFiles: "Processing {count} files...",
    modelsInCache: "✅ {count} models in cache",
    modelsLoaded: "✅ Loaded {count} models!",
    noFilesSelected: "❌ No files selected",
    noValidFiles: "❌ No valid .cm-info.json files found",
    downloaded: "Downloaded",
    notDownloaded: "Not Downloaded",
    cacheEmptyNotification: "Cache is empty! Open extension and select folder containing cm-info",
    tooltipModel: "Model",
    tooltipVersion: "Version",
    tooltipType: "Type",
    tooltipImport: "Import",
    logScanning: "=== SCANNING ===",
    logTotal: "=== TOTAL: {count} models ===",
    logFilesCount: "Files: {count}",
    logOpeningDialog: "Opening dialog...",
    logBrowser: "Browser"
  },
  es: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "Verifica modelos descargados de Stability Matrix usando archivos .cm-info.json",
    title: "Verificador de Modelos Civitai",
    selectFolder: "Seleccionar Carpeta Models",
    clearCache: "Limpiar Caché",
    subtitle: "Carga la carpeta Models de Stability Matrix",
    dropZoneTitle: "Seleccionar Carpeta Models",
    dropZoneHint: "Haz clic para seleccionar",
    cacheEmpty: "Caché vacía. Selecciona la carpeta Models",
    cacheCleared: "Caché limpiada",
    processingFiles: "Procesando {count} archivos...",
    modelsInCache: "✅ {count} modelos en caché",
    modelsLoaded: "✅ ¡{count} modelos cargados!",
    noFilesSelected: "❌ No se seleccionaron archivos",
    noValidFiles: "❌ No se encontraron archivos .cm-info.json válidos",
    downloaded: "Descargado",
    notDownloaded: "No Descargado",
    cacheEmptyNotification: "¡Caché vacía! Abre la extensión y selecciona la carpeta con cm-info",
    tooltipModel: "Modelo",
    tooltipVersion: "Versión",
    tooltipType: "Tipo",
    tooltipImport: "Importación",
    logScanning: "=== ESCANEANDO ===",
    logTotal: "=== TOTAL: {count} modelos ===",
    logFilesCount: "Archivos: {count}",
    logOpeningDialog: "Abriendo diálogo...",
    logBrowser: "Navegador"
  },
  fr: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "Vérifie les modèles téléchargés depuis Stability Matrix via les fichiers .cm-info.json",
    title: "Vérificateur de Modèles Civitai",
    selectFolder: "Sélectionner le Dossier Models",
    clearCache: "Vider le Cache",
    subtitle: "Chargez le dossier Models de Stability Matrix",
    dropZoneTitle: "Sélectionner le Dossier Models",
    dropZoneHint: "Cliquez pour sélectionner",
    cacheEmpty: "Cache vide. Sélectionnez le dossier Models",
    cacheCleared: "Cache vidé",
    processingFiles: "Traitement de {count} fichiers...",
    modelsInCache: "✅ {count} modèles en cache",
    modelsLoaded: "✅ {count} modèles chargés !",
    noFilesSelected: "❌ Aucun fichier sélectionné",
    noValidFiles: "❌ Aucun fichier .cm-info.json valide trouvé",
    downloaded: "Téléchargé",
    notDownloaded: "Non Téléchargé",
    cacheEmptyNotification: "Cache vide ! Ouvrez l'extension et sélectionnez le dossier contenant cm-info",
    tooltipModel: "Modèle",
    tooltipVersion: "Version",
    tooltipType: "Type",
    tooltipImport: "Import",
    logScanning: "=== ANALYSE ===",
    logTotal: "=== TOTAL : {count} modèles ===",
    logFilesCount: "Fichiers : {count}",
    logOpeningDialog: "Ouverture du dialogue...",
    logBrowser: "Navigateur"
  },
  ja: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: ".cm-info.jsonファイルを使用してStability Matrixからダウンロードしたモデルを確認します",
    title: "Civitaiモデルチェッカー",
    selectFolder: "Modelsフォルダを選択",
    clearCache: "キャッシュをクリア",
    subtitle: "Stability MatrixのModelsフォルダをアップロード",
    dropZoneTitle: "Modelsフォルダを選択",
    dropZoneHint: "クリックして選択",
    cacheEmpty: "キャッシュが空です。Modelsフォルダを選択してください",
    cacheCleared: "キャッシュをクリアしました",
    processingFiles: "{count}個のファイルを処理中...",
    modelsInCache: "✅ キャッシュに{count}個のモデル",
    modelsLoaded: "✅ {count}個のモデルを読み込みました！",
    noFilesSelected: "❌ ファイルが選択されていません",
    noValidFiles: "❌ 有効な.cm-info.jsonファイルが見つかりません",
    downloaded: "ダウンロード済み",
    notDownloaded: "未ダウンロード",
    cacheEmptyNotification: "キャッシュが空です！拡張機能を開き、cm-infoを含むフォルダを選択してください",
    tooltipModel: "モデル",
    tooltipVersion: "バージョン",
    tooltipType: "タイプ",
    tooltipImport: "インポート",
    logScanning: "=== スキャン中 ===",
    logTotal: "=== 合計: {count}個のモデル ===",
    logFilesCount: "ファイル数: {count}",
    logOpeningDialog: "ダイアログを開いています...",
    logBrowser: "ブラウザ"
  },
  ko: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: ".cm-info.json 파일을 사용하여 Stability Matrix에서 다운로드한 모델을 확인합니다",
    title: "Civitai 모델 체커",
    selectFolder: "Models 폴더 선택",
    clearCache: "캐시 지우기",
    subtitle: "Stability Matrix의 Models 폴더 업로드",
    dropZoneTitle: "Models 폴더 선택",
    dropZoneHint: "클릭하여 선택",
    cacheEmpty: "캐시가 비어있습니다. Models 폴더를 선택하세요",
    cacheCleared: "캐시가 지워졌습니다",
    processingFiles: "{count}개 파일 처리 중...",
    modelsInCache: "✅ 캐시에 {count}개 모델",
    modelsLoaded: "✅ {count}개 모델 로드됨!",
    noFilesSelected: "❌ 선택된 파일 없음",
    noValidFiles: "❌ 유효한 .cm-info.json 파일을 찾을 수 없습니다",
    downloaded: "다운로드됨",
    notDownloaded: "미다운로드",
    cacheEmptyNotification: "캐시가 비어있습니다! 확장 프로그램을 열고 cm-info가 포함된 폴더를 선택하세요",
    tooltipModel: "모델",
    tooltipVersion: "버전",
    tooltipType: "유형",
    tooltipImport: "가져오기",
    logScanning: "=== 스캔 중 ===",
    logTotal: "=== 총 {count}개 모델 ===",
    logFilesCount: "파일 수: {count}",
    logOpeningDialog: "대화 상자 열기...",
    logBrowser: "브라우저"
  },
  ru: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "Проверяет наличие скачанных моделей из Stability Matrix по файлу .cm-info.json",
    title: "Civitai Model Checker",
    selectFolder: "Выбрать папку Models",
    clearCache: "Очистить кеш",
    subtitle: "Загрузите папку Models из Stability Matrix",
    dropZoneTitle: "Выберите папку Models",
    dropZoneHint: "Кликните для выбора",
    cacheEmpty: "Кеш пуст. Выберите папку Models",
    cacheCleared: "Кеш очищен",
    processingFiles: "Обработка {count} файлов...",
    modelsInCache: "✅ В кеше {count} моделей",
    modelsLoaded: "✅ Загружено {count} моделей!",
    noFilesSelected: "❌ Файлы не выбраны",
    noValidFiles: "❌ Не найдено валидных .cm-info.json",
    downloaded: "Скачано",
    notDownloaded: "Не скачано",
    cacheEmptyNotification: "Кеш пуст! Откройте расширение и выберите папку, содержащую cm-info",
    tooltipModel: "Модель",
    tooltipVersion: "Версия",
    tooltipType: "Тип",
    tooltipImport: "Импорт",
    logScanning: "=== СКАНИРОВАНИЕ ===",
    logTotal: "=== ИТОГО: {count} моделей ===",
    logFilesCount: "Файлов: {count}",
    logOpeningDialog: "Открываю диалог...",
    logBrowser: "Браузер"
  },
  zh_CN: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "使用.cm-info.json文件检查从Stability Matrix下载的模型",
    title: "Civitai 模型检查器",
    selectFolder: "选择Models文件夹",
    clearCache: "清除缓存",
    subtitle: "从Stability Matrix上传Models文件夹",
    dropZoneTitle: "选择Models文件夹",
    dropZoneHint: "点击选择",
    cacheEmpty: "缓存为空。请选择Models文件夹",
    cacheCleared: "缓存已清除",
    processingFiles: "正在处理{count}个文件...",
    modelsInCache: "✅ 缓存中有{count}个模型",
    modelsLoaded: "✅ 已加载{count}个模型！",
    noFilesSelected: "❌ 未选择文件",
    noValidFiles: "❌ 未找到有效的.cm-info.json文件",
    downloaded: "已下载",
    notDownloaded: "未下载",
    cacheEmptyNotification: "缓存为空！请打开扩展程序并选择包含cm-info的文件夹",
    tooltipModel: "模型",
    tooltipVersion: "版本",
    tooltipType: "类型",
    tooltipImport: "导入",
    logScanning: "=== 扫描中 ===",
    logTotal: "=== 总计: {count}个模型 ===",
    logFilesCount: "文件数: {count}",
    logOpeningDialog: "正在打开对话框...",
    logBrowser: "浏览器"
  },
  zh_TW: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "使用.cm-info.json檔案檢查從Stability Matrix下載的模型",
    title: "Civitai 模型檢查器",
    selectFolder: "選擇Models資料夾",
    clearCache: "清除快取",
    subtitle: "從Stability Matrix上傳Models資料夾",
    dropZoneTitle: "選擇Models資料夾",
    dropZoneHint: "點擊選擇",
    cacheEmpty: "快取為空。請選擇Models資料夾",
    cacheCleared: "快取已清除",
    processingFiles: "正在處理{count}個檔案...",
    modelsInCache: "✅ 快取中有{count}個模型",
    modelsLoaded: "✅ 已載入{count}個模型！",
    noFilesSelected: "❌ 未選擇檔案",
    noValidFiles: "❌ 未找到有效的.cm-info.json檔案",
    downloaded: "已下載",
    notDownloaded: "未下載",
    cacheEmptyNotification: "快取為空！請開啟擴充功能並選擇包含cm-info的資料夾",
    tooltipModel: "模型",
    tooltipVersion: "版本",
    tooltipType: "類型",
    tooltipImport: "匯入",
    logScanning: "=== 掃描中 ===",
    logTotal: "=== 總計: {count}個模型 ===",
    logFilesCount: "檔案數: {count}",
    logOpeningDialog: "正在開啟對話方塊...",
    logBrowser: "瀏覽器"
  },
  de: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "Überprüft heruntergeladene Modelle von Stability Matrix anhand von .cm-info.json-Dateien",
    title: "Civitai Modell-Prüfer",
    selectFolder: "Models-Ordner auswählen",
    clearCache: "Cache leeren",
    subtitle: "Models-Ordner von Stability Matrix hochladen",
    dropZoneTitle: "Models-Ordner auswählen",
    dropZoneHint: "Klicken zum Auswählen",
    cacheEmpty: "Cache ist leer. Wählen Sie den Models-Ordner",
    cacheCleared: "Cache geleert",
    processingFiles: "{count} Dateien werden verarbeitet...",
    modelsInCache: "✅ {count} Modelle im Cache",
    modelsLoaded: "✅ {count} Modelle geladen!",
    noFilesSelected: "❌ Keine Dateien ausgewählt",
    noValidFiles: "❌ Keine gültigen .cm-info.json-Dateien gefunden",
    downloaded: "Heruntergeladen",
    notDownloaded: "Nicht heruntergeladen",
    cacheEmptyNotification: "Cache ist leer! Öffnen Sie die Erweiterung und wählen Sie den Ordner mit cm-info",
    tooltipModel: "Modell",
    tooltipVersion: "Version",
    tooltipType: "Typ",
    tooltipImport: "Import",
    logScanning: "=== SCANNEN ===",
    logTotal: "=== GESAMT: {count} Modelle ===",
    logFilesCount: "Dateien: {count}",
    logOpeningDialog: "Dialog wird geöffnet...",
    logBrowser: "Browser"
  },
  pt_BR: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "Verifica modelos baixados do Stability Matrix usando arquivos .cm-info.json",
    title: "Verificador de Modelos Civitai",
    selectFolder: "Selecionar Pasta Models",
    clearCache: "Limpar Cache",
    subtitle: "Carregue a pasta Models do Stability Matrix",
    dropZoneTitle: "Selecionar Pasta Models",
    dropZoneHint: "Clique para selecionar",
    cacheEmpty: "Cache vazio. Selecione a pasta Models",
    cacheCleared: "Cache limpo",
    processingFiles: "Processando {count} arquivos...",
    modelsInCache: "✅ {count} modelos no cache",
    modelsLoaded: "✅ {count} modelos carregados!",
    noFilesSelected: "❌ Nenhum arquivo selecionado",
    noValidFiles: "❌ Nenhum arquivo .cm-info.json válido encontrado",
    downloaded: "Baixado",
    notDownloaded: "Não Baixado",
    cacheEmptyNotification: "Cache vazio! Abra a extensão e selecione a pasta contendo cm-info",
    tooltipModel: "Modelo",
    tooltipVersion: "Versão",
    tooltipType: "Tipo",
    tooltipImport: "Importação",
    logScanning: "=== ESCANEANDO ===",
    logTotal: "=== TOTAL: {count} modelos ===",
    logFilesCount: "Arquivos: {count}",
    logOpeningDialog: "Abrindo diálogo...",
    logBrowser: "Navegador"
  },
  ar: {
    extensionName: "Civitai SM Model Checker Companion",
    extensionDescription: "يتحقق من النماذج المحملة من Stability Matrix باستخدام ملفات .cm-info.json",
    title: "فاحص نماذج Civitai",
    selectFolder: "اختر مجلد Models",
    clearCache: "مسح ذاكرة التخزين المؤقت",
    subtitle: "قم بتحميل مجلد Models من Stability Matrix",
    dropZoneTitle: "اختر مجلد Models",
    dropZoneHint: "انقر للاختيار",
    cacheEmpty: "ذاكرة التخزين المؤقت فارغة. اختر مجلد Models",
    cacheCleared: "تم مسح ذاكرة التخزين المؤقت",
    processingFiles: "جارٍ معالجة {count} ملف...",
    modelsInCache: "✅ {count} نموذج في ذاكرة التخزين المؤقت",
    modelsLoaded: "✅ تم تحميل {count} نموذج!",
    noFilesSelected: "❌ لم يتم اختيار ملفات",
    noValidFiles: "❌ لم يتم العثور على ملفات .cm-info.json صالحة",
    downloaded: "تم التحميل",
    notDownloaded: "لم يتم التحميل",
    cacheEmptyNotification: "ذاكرة التخزين المؤقت فارغة! افتح الإضافة واختر المجلد الذي يحتوي على cm-info",
    tooltipModel: "النموذج",
    tooltipVersion: "الإصدار",
    tooltipType: "النوع",
    tooltipImport: "الاستيراد",
    logScanning: "=== المسح الضوئي ===",
    logTotal: "=== الإجمالي: {count} نموذج ===",
    logFilesCount: "الملفات: {count}",
    logOpeningDialog: "فتح مربع الحوار...",
    logBrowser: "المتصفح"
  }
};

class I18n {
  constructor() {
    this.currentLocale = this.detectLanguage();
  }
  
  detectLanguage() {
    const browserLang = navigator.language || navigator.userLanguage || 'en';
    if (translations[browserLang]) return browserLang;
    const primary = browserLang.split('-')[0];
    if (translations[primary]) return primary;
    if (browserLang.startsWith('zh')) {
      return browserLang.includes('TW') || browserLang.includes('HK') ? 'zh_TW' : 'zh_CN';
    }
    if (browserLang.startsWith('pt')) return 'pt_BR';
    return 'en';
  }
  
  t(key, params = {}) {
    let text = translations[this.currentLocale]?.[key] || translations['en'][key] || key;
    Object.keys(params).forEach(param => {
      text = text.replace(new RegExp(`\\{${param}\\}`, 'g'), params[param]);
    });
    return text;
  }
}

if (typeof module !== 'undefined' && module.exports) {
  module.exports = { I18n, translations };
}